
# Техническая спецификация Circle MUD Clone

## 1. Игровой мир - Мидгард

### Карта локаций
```
     [Северные ворота]
           |
[Запад] - [Центр] - [Восток]
           |
     [Южные ворота]
           |
        [Храм]
```

### Описания локаций

#### Центральная площадь (center)
- **Название**: "Центральная площадь Мидгарда"
- **Описание**: "Большая мощеная площадь в центре города. Здесь всегда много народу."
- **Выходы**: север, юг, восток, запад
- **НПС**: Городской глашатай
- **Предметы**: Информационная доска

#### Северные ворота (north_gate)
- **Название**: "Северные ворота"
- **Описание**: "Массивные каменные ворота, ведущие на север из города."
- **Выходы**: юг
- **НПС**: Стражник
- **Предметы**: -

## 2. Система игрока

### Характеристики
```javascript
{
  name: "Игрок",
  level: 1,
  experience: 0,
  experienceToNext: 100,
  hitPoints: 20,
  maxHitPoints: 20,
  strength: 10,
  dexterity: 10,
  constitution: 10,
  intelligence: 10,
  wisdom: 10,
  charisma: 10
}
```

### Система уровней
- **Уровень 1**: 0-99 опыта
- **Уровень 2**: 100-299 опыта
- **Уровень 3**: 300-599 опыта
- При повышении уровня: +5 HP, +1 к случайной характеристике

## 3. Система предметов

### Типы предметов
- **weapon** - оружие (меч, кинжал)
- **armor** - броня (кольчуга, щит)
- **potion** - зелья (лечения, маны)
- **misc** - разное (ключи, книги)

### Пример предмета
```javascript
{
  id: "iron_sword",
  name: "железный меч",
  description: "Хорошо сбалансированный железный меч.",
  type: "weapon",
  damage: "1d6+1",
  weight: 3,
  value: 50
}
```

## 4. НПС и монстры

### Типы НПС
- **friendly** - дружелюбные (торговцы, стражники)
- **neutral** - нейтральные (жители)
- **hostile** - враждебные (монстры)

### Пример НПС
```javascript
{
  id: "city_guard",
  name: "городской стражник",
  description: "Сильный воин в кольчуге с мечом.",
  type: "friendly",
  hitPoints: 25,
  maxHitPoints: 25,
  damage: "1d6+2",
  experience: 0,
  drops: []
}
```

## 5. Система команд

### Парсинг команд
```javascript
// Примеры ввода:
"look" → {command: "look", target: null}
"look sword" → {command: "look", target: "sword"}
"go north" → {command: "go", direction: "north"}
"get iron sword" → {command: "get", target: "iron sword"}
```

### Обработка команд
1. Разбор строки на команду и аргументы
2. Проверка валидности команды
3. Проверка контекста (можно ли выполнить)
4. Выполнение команды
5. Возврат результата

## 6. Боевая система

### Механика боя
1. Игрок атакует: `kill <target>`
2. Вычисление урона: базовый урон + модификаторы
3. НПС отвечает (если жив)
4. Повтор до смерти одной из сторон
5. Выдача опыта победителю

### Формула урона
```javascript
damage = roll(weaponDamage) + strengthModifier
```

## 7. Пользовательский интерфейс

### Основные компоненты
- **Окно вывода** (70% экрана) - история команд и ответов
- **Строка ввода** (внизу) - ввод команд
- **Панель статистики** (справа) - HP, уровень, опыт
- **Мини-карта** (справа внизу) - текущая локация

### Стилизация
- Тема "терминал": черный фон, зеленый текст
- Моноширинный шрифт (Consolas, Monaco)
- Подсветка важных слов (предметы, НПС)

## 8. Сохранение данных

### LocalStorage
```javascript
{
  player: {}, // состояние игрока
  currentRoom: "center", // текущая локация
  gameTime: Date.now(), // время сохранения
  rooms: {}, // состояние локаций (если изменились)
}
```

### Автосохранение
- При смене локации
- При изменении инвентаря
- При повышении уровня
- Каждые 30 секунд

## 9. Расширяемость

### Добавление нового контента
- Новые локации: обновить `rooms.json`
- Новые предметы: обновить `items.json`
- Новые НПС: обновить `npcs.json`
- Новые команды: зарегистрировать в CommandParser

### Модульность
Каждый игровой элемент (локация, предмет, НПС) - отдельный объект с четко определенным интерфейсом.
